手动上传 FAQ 素材关联表 (rag_faq_manual_media) 设计说明

1. 设计目标

为了更好地管理手动上传到 FAQ 的素材（例如图片、视频、语音、附件等），并为未来的功能扩展奠定基础，选择创建 rag_faq_manual_media
关联表，用于连接 ModelFAQ 表和存储手动上传素材信息的表 (rag_manual_materials)。

2. 设计理由

清晰表达 FAQ 与素材之间的关系： 一个 FAQ 可能关联多个手动上传的素材，而一个手动上传的素材在逻辑上也可以被多个 FAQ
引用（即使当前产品设计可能导致文件重复存储，但关联关系仍然是多对多的）。关联表能够清晰地表达这种关系。
为未来素材复用和统一管理铺平道路： 即使当前产品设计没有对上传的素材进行统一管理和复用，但未来的迭代很可能会考虑优化存储，避免重复文件。使用关联表可以为实现素材的复用提供灵活的基础，届时只需要修改
material_id 的指向即可。
更好的数据规范性和可维护性： 关联表避免了在 ModelFAQ 表中存储逗号分隔的素材 ID 字符串或 JSON
数组，符合数据库设计的规范，使得数据结构更清晰，方便进行数据查询和维护。
支持未来功能扩展： 如果未来需要在 FAQ 和素材之间建立更复杂的关系，例如存储素材的显示顺序、描述等额外信息，关联表可以很方便地添加新的字段进行扩展。
更灵活的数据操作： 方便查询某个 FAQ 关联的所有素材，或者在未来需要统计素材的引用情况、进行数据清理等操作时，关联表能够提供更强大的查询能力。

3. 替代方案及其缺点

曾考虑过直接在 ModelFAQ 表中增加存储手动上传文件信息的字段（例如逗号分隔的 ID 列表或 JSON 数组），但这种做法存在以下缺点：

数据冗余： 同一个素材的 ID 或信息会在多个 FAQ 记录中重复存储。
难以进行文件级别的管理和查询。
字段长度限制和数据操作复杂性。
未来扩展性差。

4. 结论

尽管使用关联表 rag_faq_manual_media 会增加一个表的维护，并且在工作流中获取素材 URL
时可能需要额外的查询步骤，但其带来的数据规范性、可维护性和未来扩展性方面的优势更为重要，能够为构建一个稳定和可维护的 AI
智能客服系统奠定坚实的基础。在工作流中获取素材 URL 时的性能问题，可以通过优化查询策略（例如批量查询、缓存等）来缓解。
